# -*- coding: utf-8 -*-
# Copyright 2021 Huawei Technologies Co., Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# wITHOUT wARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# ============================================================================
"""Test svg."""
from mindquantum import qft, BarrierGate, RX

def test_svg():
    """
    test
    Description:
    Expectation:
    """
    text = (qft(range(3))+RX({'a':1.2}).on(1)+BarrierGate()).measure_all().svg()._repr_svg_()
    text_exp = """<svg xmlns="http://www.w3.org/2000/svg" width="899.64" height="230.0">\n<rect x="20" y="10" width="856.8" height="200" fill="#180835" />\n<text x="40.0" y="50.0" font-size="16px" dominant-baseline="middle" text-anchor="start" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nq0:\n </text>\n<text x="40.0" y="110.0" font-size="16px" dominant-baseline="middle" text-anchor="start" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nq1:\n </text>\n<text x="40.0" y="170.0" font-size="16px" dominant-baseline="middle" text-anchor="start" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nq2:\n </text>\n<line x1="68.8" x2="856.8" y1="50.0" y2="50.0" stroke="#d8d8d8" stroke-width="4" />\n<line x1="68.8" x2="856.8" y1="110.0" y2="110.0" stroke="#d8d8d8" stroke-width="4" />\n<line x1="68.8" x2="856.8" y1="170.0" y2="170.0" stroke="#d8d8d8" stroke-width="4" />\n\n<rect x="92.8" y="30.0" width="40.0" height="40" rx="9" ry="9" stroke="#e9b645" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="112.8" y="50.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nH\n </text>\n\n<circle cx="192.8" cy="110.0" r="5.5" fill="#ad20e9" />\n<line x1="192.8" x2="192.8" y1="50.0" y2="110.0" stroke="#ad20e9" stroke-width="4" />\n<rect x="172.8" y="30.0" width="40.0" height="40" rx="9" ry="9" stroke="#ad20e9" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="192.8" y="46.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nPS\n </text>\n<text x="192.8" y="62.0" font-size="12.6px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nπ/2\n </text>\n\n<circle cx="272.8" cy="170.0" r="5.5" fill="#ad20e9" />\n<line x1="272.8" x2="272.8" y1="50.0" y2="170.0" stroke="#ad20e9" stroke-width="4" />\n<rect x="252.8" y="30.0" width="40.0" height="40" rx="9" ry="9" stroke="#ad20e9" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="272.8" y="46.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nPS\n </text>\n<text x="272.8" y="62.0" font-size="12.6px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nπ/4\n </text>\n\n\n<rect x="332.8" y="90.0" width="40.0" height="40" rx="9" ry="9" stroke="#e9b645" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="352.8" y="110.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nH\n </text>\n\n<circle cx="432.8" cy="170.0" r="5.5" fill="#ad20e9" />\n<line x1="432.8" x2="432.8" y1="110.0" y2="170.0" stroke="#ad20e9" stroke-width="4" />\n<rect x="412.8" y="90.0" width="40.0" height="40" rx="9" ry="9" stroke="#ad20e9" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="432.8" y="106.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nPS\n </text>\n<text x="432.8" y="122.0" font-size="12.6px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nπ/2\n </text>\n\n\n<rect x="492.8" y="150.0" width="40.0" height="40" rx="9" ry="9" stroke="#e9b645" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="512.8" y="170.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nH\n </text>\n\n<line x1="592.8" x2="592.8" y1="30.0" y2="190.0" stroke-width="4" stroke="#30ac1a" />\n\n<rect x="572.8" y="30.0" width="40" height="40" rx="9" ry="9" fill="#180835" fill-opacity="1" stroke="#30ac1a" stroke-width="4" />\n<path d="M 583.1999999999999 46.31384387633061 L 588.0 38.0 L 592.8 46.31384387633061 L 589.4399999999999 46.31384387633061 L 589.4399999999999 62.0 L 586.56 62.0 L 586.56 46.31384387633061 Z" fill="#595bea" />\n<path d="M 602.4 53.68615612366939 L 597.6 62.0 L 592.8 53.68615612366939 L 596.16 53.68615612366939 L 596.16 38.0 L 599.04 38.0 L 599.04 53.68615612366939 Z" fill="#595bea" />\n<rect x="572.8" y="150.0" width="40" height="40" rx="9" ry="9" fill="#180835" fill-opacity="1" stroke="#30ac1a" stroke-width="4" />\n<path d="M 583.1999999999999 166.31384387633062 L 588.0 158.0 L 592.8 166.31384387633062 L 589.4399999999999 166.31384387633062 L 589.4399999999999 182.0 L 586.56 182.0 L 586.56 166.31384387633062 Z" fill="#595bea" />\n<path d="M 602.4 173.68615612366938 L 597.6 182.0 L 592.8 173.68615612366938 L 596.16 173.68615612366938 L 596.16 158.0 L 599.04 158.0 L 599.04 173.68615612366938 Z" fill="#595bea" />\n\n<rect x="652.8" y="90.0" width="40.0" height="40" rx="9" ry="9" stroke="#ad20e9" stroke-width="4" fill="#180835" fill-opacity="1" />\n<text x="672.8" y="106.0" font-size="18px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\nRX\n </text>\n<text x="672.8" y="122.0" font-size="12.6px" dominant-baseline="middle" text-anchor="middle" font-family="Arial-BoldMT, Arial" font-weight="bold" fill="#d8d8d8" >\n1.2*a\n </text>\n\n<rect x="732.8" y="30.0" width="20" height="160" fill="#8a744d" fill-opacity="0.95" />\n<rect x="792.8" y="30.0" width="40" height="40" rx="9" ry="9" stroke="#ffffff" stroke-width="4" fill="#180835" fill-opacity="1" />\n<circle cx="812.8" cy="60.4" r="1.6" fill="#e92734" />\n<path d="M 800.0 60.4 A 12.8 12.8 0 0 1 825.5999999999999 60.4" stroke="#e92734" stroke-width="2.4000000000000004" fill-opacity="0" />\n<path d="M 816.9018483174859 43.93539030917347 L 825.2156921938165 39.13539030917347 L 825.2156921938165 48.73539030917347 L 821.8901546432843 46.815390309173466 L 814.0470765814496 60.4 L 812.3843078061834 59.44 L 820.2273858680181 45.85539030917347 Z" fill="#e92734" />\n<rect x="792.8" y="90.0" width="40" height="40" rx="9" ry="9" stroke="#ffffff" stroke-width="4" fill="#180835" fill-opacity="1" />\n<circle cx="812.8" cy="120.4" r="1.6" fill="#e92734" />\n<path d="M 800.0 120.4 A 12.8 12.8 0 0 1 825.5999999999999 120.4" stroke="#e92734" stroke-width="2.4000000000000004" fill-opacity="0" />\n<path d="M 816.9018483174859 103.93539030917347 L 825.2156921938165 99.13539030917347 L 825.2156921938165 108.73539030917347 L 821.8901546432843 106.81539030917347 L 814.0470765814496 120.4 L 812.3843078061834 119.44 L 820.2273858680181 105.85539030917347 Z" fill="#e92734" />\n<rect x="792.8" y="150.0" width="40" height="40" rx="9" ry="9" stroke="#ffffff" stroke-width="4" fill="#180835" fill-opacity="1" />\n<circle cx="812.8" cy="180.4" r="1.6" fill="#e92734" />\n<path d="M 800.0 180.4 A 12.8 12.8 0 0 1 825.5999999999999 180.4" stroke="#e92734" stroke-width="2.4000000000000004" fill-opacity="0" />\n<path d="M 816.9018483174859 163.93539030917347 L 825.2156921938165 159.13539030917346 L 825.2156921938165 168.73539030917345 L 821.8901546432843 166.81539030917347 L 814.0470765814496 180.4 L 812.3843078061834 179.44 L 820.2273858680181 165.85539030917346 Z" fill="#e92734" />\n</svg>"""
    assert text == text_exp
